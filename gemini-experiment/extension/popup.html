<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gemini Translator</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="header">
      <h1>Gemini Translator</h1>
      <div class="connection-status">
        <div id="statusIndicator" class="status-indicator unconfigured">
          <span class="status-dot"></span>
          <span class="status-text">Not configured</span>
        </div>
        <button type="button" id="refreshBtn" class="refresh-btn" aria-label="Refresh connection status" title="Check connection">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M23 4v6h-6"></path>
            <path d="M1 20v-6h6"></path>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
          </svg>
        </button>
      </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-nav">
      <button type="button" class="tab-btn active" data-tab="page">Page</button>
      <button type="button" class="tab-btn" data-tab="text">Text</button>
    </nav>

    <!-- Page Translation Tab -->
    <main id="pageTab" class="tab-content active">
      <section class="settings-group collapsible" id="serverConfigSection">
        <div class="section-header" data-section="serverConfigSection">
          <h2>Server Configuration <span class="section-status" id="serverConfigStatus"></span></h2>
          <span class="toggle-icon">▼</span>
        </div>
        <div class="section-content">
          <div class="section-content-inner">
            <div class="form-group">
              <label for="serverUrl">Server URL</label>
              <input type="text" id="serverUrl" placeholder="http://192.168.110.58:8001/proxy/translate" tabindex="1" />
            </div>
          </div>
        </div>
      </section>

      <section class="settings-group">
        <h2>Translation Settings</h2>
        <div class="form-group">
          <label for="model">Model Name</label>
          <input type="text" id="model" placeholder="gemini-2.0-flash" tabindex="2" />
        </div>
        <div class="form-group">
          <label for="targetLanguage">Target Language</label>
          <select id="targetLanguage" tabindex="3">
            <option value="Japanese">Japanese (日本語)</option>
            <option value="English">English</option>
            <option value="Chinese (Simplified)">Chinese Simplified (简体中文)</option>
            <option value="Chinese (Traditional)">Chinese Traditional (繁體中文)</option>
            <option value="Korean">Korean (한국어)</option>
            <option value="Vietnamese">Vietnamese (Tiếng Việt)</option>
          </select>
        </div>
      </section>

      <footer>
        <div class="button-group">
          <button id="saveBtn" class="btn-secondary" tabindex="4">Save</button>
          <button id="translateBtn" class="btn-primary" tabindex="5">Translate</button>
        </div>
      </footer>
    </main>

    <!-- Text Translation Tab -->
    <main id="textTab" class="tab-content">
      <section class="translator-panel">
        <div class="translator-header">
          <select id="textModel" class="model-select" tabindex="10">
            <option value="gemini-2.0-flash">gemini-2.0-flash</option>
            <option value="gemini-2.0-flash-lite">gemini-2.0-flash-lite</option>
            <option value="gemini-1.5-flash">gemini-1.5-flash</option>
            <option value="gemini-1.5-pro">gemini-1.5-pro</option>
          </select>
          <select id="textTargetLang" class="lang-select" tabindex="11">
            <option value="Japanese">日本語</option>
            <option value="English">English</option>
            <option value="Chinese (Simplified)">简体中文</option>
            <option value="Chinese (Traditional)">繁體中文</option>
            <option value="Korean">한국어</option>
            <option value="Vietnamese">Tiếng Việt</option>
          </select>
        </div>
        <div class="translator-body">
          <div class="text-area-wrapper">
            <textarea id="sourceText" placeholder="Enter text to translate..." tabindex="12"></textarea>
            <button type="button" id="clearSourceBtn" class="clear-btn" aria-label="Clear text" title="Clear">×</button>
          </div>
          <div class="divider"></div>
          <div class="text-area-wrapper output">
            <div id="translatedText" class="translated-output" tabindex="-1"></div>
            <button type="button" id="copyResultBtn" class="copy-btn" aria-label="Copy translation" title="Copy">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
          </div>
        </div>
        <footer class="translator-footer">
          <span id="charCount" class="char-count">0 / 5000</span>
          <button id="textTranslateBtn" class="btn-primary" tabindex="13">Translate</button>
        </footer>
      </section>
    </main>

    <div id="status" class="status"></div>
    <div id="toastContainer" class="toast-container"></div>

    <script type="module" src="popup.js"></script>
  </body>
</html>
